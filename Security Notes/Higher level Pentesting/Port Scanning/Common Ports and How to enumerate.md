# Common Ports 
## How to enumerate and what to do with them

#### 21 FTP 
`ftp <ip>`
Check for anonymous login
See if you can download/upload or exec backdoor code?  


#### 22 SSH 
`ssh user@ip -i id_rsa`

Bruteforce with Hydra

**Error:** Unable to negotiate with 10.10.10.7 port 22: no matching key exchange method found. Their offer: diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1

**Solution:** `ssh -oKexAlgorithms=+diffie-hellman-group1-sha1 user@legacyhost`


#### 23 Telnet
GG


#### 25 SMTP
Server to server service. User sends mail using imap or pop3. These messages router to SMTP server
**Can manually access using nc:** 
` nc <host> 25`

**Check what commands are available:**
`nmap -script smtp-commands.nse 192.168.1.101`

**Enumerate for users:**
`smtp-user-enum -M VRFY -U /root/sectools/SecLists/Usernames/Names/names.txt -t <host>`


## 53 DNS
`nslookup` to check for other domain names
Check for zone transfers: `dig axfr @<ip> <abc.com>`   
Make sure abc.com in /etc/hosts


#### 135 MSRPC
 Windows RPC Port
 `nmap <host> —script=msrpc-enum`
 `msf > use exploit/windows/dcerpc/ms03_026_dcom`
 `rpc -N -U "" <ip>`


#### 88 Kerbros-Sec
`kerbrute`


#### 110 POP3
Connected with SMTP, used to retreive emails
`telnet <ip> 110`  
`USER username`  
`PASS password`

#### 111/2049 RPCbind/NFS
`showmount -e` to query the mount daemon on a remote host for info about the state of the NFS server on that machine. Lists potential shares
`rpcinfo -p <ip>` to check for shares. Ususally only care for NFS shares so grep nfs

**Nmap scan:**  
`nmap -p 111 --script=nfs-ls,nfs-statfs,nfs-showmount 10.10.185.215`


#### 135 MSRPC 
`rpcdump`
`rpcinfo`  

**Nmap Scan:**  
`nmap 192.168.0.101 --script=msrpc-enum`


#### 139/445 SMB/NetBIOS
Access files

**smbclient**
-N no login
-L list shares
-U user
`smbclient -N -L <ip>`
`smbclient \\\\<ip>\\directory `

**nmap scripts**
`nmap -p445 --script smb-vuln-*`

**Others**
`nbtscan -v <ip>`
`enum4linux <ip>`


#### 443 HTTPS
Check if there is a different site here
SSL Bug Heartbleed  


#### 3306 MySQL
Default creds `root:root`  

**Nmap Script:**  
`nmap --script=mysql-enum <ip>`

**Cheat Sheet:**
`[http://cse.unl.edu/~sscott/ShowFiles/SQL/CheatSheet/SQLCheatSheet.html](http://cse.unl.edu/~sscott/ShowFiles/SQL/CheatSheet/SQLCheatSheet.html)`

Can dump DB, hashes or get version
If root runs this, we can privesc 

#### 3389 RDP
`rdesktop -u guest -p guest <ip>`  
**Brute Force:**  
`ncrack -vv --user Administrator -P /root/passwords.txt rdp://192.168.1.101`


#### 6379 Redis 
Check if you can upload files, might want to try to upload a webshell or ssh key
Can use redis-tools → commands online
